<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">
	  <script src="js/jquery.min.js"></script>
	  <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery-1.11.3.js"></script>
   
    <title>Document</title>
    <style>
    
    </style>
</head>
<body>
  
<div id="app"> 
  <div class="head">
    <div class="container-fuild t3 mr1">
      <div class="d-flex ">
        <p>
          <p class="color">Hi,欢迎访问麦雪蛋糕官网</p>
          <a href="" class="color pl-1"> [登录|</a>
          <a href="" class="color">注册]</a>
        </p>
        <ul class="list-unstyled d-flex justify-content-end w-75">
          <li>
            <a href=""><img src="img/hongbao.png" alt=""></a>
          </li>
          <li class="d2">
            <span class="cr">{{thecount}}</span>
            <a class="headone" href=""><img src="img/gouwuche.png" alt=""></a>
          </li>
          <li class="">  
            <a class="headone theh alla" href="">我的麦雪</a>
          </li>
          <li>
            <a class="headone theh" href="">我的订单 |</a>
          </li>
          <li>
            <a class="headone theh" href="">手机网站</a>
          </li>
          <li>
            <a class="headone theh" href="">公众号</a>
          </li>
          <li>
              <a class="headone theh" href="">微信客户</a>
            </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="nav clearFloat">
    <div class="container-fiuled t1 t3">
      <div class="mr row no-gutter w-100">
        <div class="col-3 no">
          <div>
            <img class="pl-5" src="img/front_logo.gif" alt="">
          </div>
        </div>
        <div class="col-6 no">
          <div id="d11" class="pr-5">
            <ul class="nav_wrap d-flex list-unstyled pt-4 justify-content-around">
              <li><a href="">首页</a></li>
              <li><a href="">品牌故事</a></li>
              <li><a href="">订购指南</a></li>
              <li><a href="">乳脂奶油蛋糕</a></li>
              <li><a href="">慕斯蛋糕</a></li>
            </ul>
          </div>
        </div>
        <div class="col-3 no">
          <div class="">
              <ul class="list-unstyled no">
                <li class="li1">订购热线:</li>
                <li class="li2">0771-3928662</li>
                <li class="li3">订购时间：8：00-18：00 配送时间：10：00-21：00</li>
              </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="process">
      <div class="theblank"></div>
      <div id="ur_hr">
          <ul class="list-unstyled d-flex">
              <li >当前位置:</li>
              <li>首页</li>
              <li>></li>
              <li>购物流程</li>
          </ul>
      </div>
      <div>
          <span class="chartspan">我的购物车</span>
      </div>
      <br>
      <br>
      <div class="test90">
          <ul class="list-unstyled d-flex m-0 theul2">
              <li class="mli1">商品</li>
              <li class="mli2">属性</li>
              <li class="mli3">单价</li>
              <li class="mli4">购买数量</li>
              <li class="mli4">小计</li>
              <li class="mli5">操作</li>
          </ul>
      </div>
      
  </div>
  

  
    <ul v-for="(item,index) in items" :key="index" class="d-flex list-unstyled chartul  pt-4 pb-4" style="border-bottom: 1px dashed #cccccc;">
      <li class="d-flex mli11">
        <div style="border:1px solid #cccccc">
          <img class="pt-3 pb-3" :src="item.new_time" style="width: 100px; height: 100px;" alt="">
        </div>
        <p style="font-size: 14px;" class="pl-4">{{item.item_name}}</p>
      </li>
      <li class="mli12 pt-5">
        <p>
          磅数：{{item.item_weight}}磅
        </p>
      </li>
      <li class="mli13 pt-5">￥{{item.item_solor_price}}元</li>
      <li class="mli14 d-flex pt-5">
        <div @click="sub(index)" class="chartbutton pb-1 mr-2" style="color: black; cursor: pointer;">
          -
        </div>
        
        <input  class="chartinput" type="text" :placeholder=item.item_address>
        
        <div @click="add(index)" class="chartbutton pb-1 ml-2" style="color: black; cursor: pointer;">
          +
        </div>
      </li>
      <li class="mli15 pt-5">
        ￥{{item.item_price}}元
      </li>
      <li class="mli16 pt-5">
        <img v-on:click="remove(index)" src="img/x.png" alt="">
      </li> 
    </ul>
    <div id="app1" style="border-bottom: 1px solid #cccccc;" class="chartborder d-flex justify-content-end pt-5 pb-3 mb-2">
      <p class="mr-5">
        购物金额小计 ￥{{c}}
      </p>
    </div>
    <div class="pt-2">
      <ul class="list-unstyled d-flex ul22">
        <li v-on:click="del()" class="li22 btn0 li41">
          <a style="color: black;">
            清空购物车
          </a>
        </li>
        <li class="li22 btn0 li42">
          <a style="color: black;"  href="http://127.0.0.1:8080/page.html">
            继续购物
          </a>
        </li>
        <li>
          <div class="li22 btn0 li43" style="background-color: #f55a19; border: none; color:white">
            <a style="color: black;"  href="">
              开始结算
            </a>
          </div>
        </li>
      </ul>
    </div>
    <div>
      <ul class="list-unstyled thebul">
        <li class="thechartb">※ 温馨提示</li>
        <li style="font-size: 14px;">1.0磅13X13(cm)： 约3-4食用 免费配送5套餐具</li>
        <li style="font-size: 14px;">2.0磅18X18(cm)： 约7-8食用 免费配送10套餐具</li>
        <li style="font-size: 14px;">3.0磅22X22(cm)： 约11-12食用 免费配送15套餐具</li>
        <li style="font-size: 14px;">5.0磅28X28(cm)： 约15-20食用 免费配送20套餐具</li>
        <li style="font-size: 14px;">订购电话：13617886627</li>
      </ul>
    </div>
  </div>


  <div  class="container-fuild ww">
    <div class="d-flex just-content-center thefooter1">
      <ul class="list-unstyled d-flex" id="u1a">
        <li>
          <img :src=item. alt="">
        </li>
        <li>
          <div class="ml-3">
            <ul id="d16" class="list-unstyled d-flex justify-content-around w-50 pl-4">
              <li>订购指南</li>
              <li>配送方式</li>
              <li>练习我们</li>
            </ul>
            
            <p id="p11" class="pl-4 pt-4">
              ©2017 麦雪蛋糕官网 版权所有
              <a href="">：桂ICP备17002731号</a>
              
            </p>
            <p style="color:white; font-size: 12px; font-family:宋体;" class="pl-4">地址：南宁市西乡塘区大学西路65号西明商业广场 预定热线： 0771-3928662 手机预定：13617886627</p>
          </div>
        </li>
        <li>
          <img id="uimg" class="pl-3" src="img/fr_logo.png" alt="">
          <div>
            <ul id="uimg1" class="list-unstyled d-flex justify-content-around ml-4">
              <li>
                <p>分享到</p>
                <a href=""><img src="img/11.jpg" alt=""></a>
              </li>
              <li><a href=""><img src="img/12.jpg" alt=""></a></li>
              <li><a href=""><img src="img/13.jpg" alt=""></a></li>
              <li><a href=""><img src="img/14.jpg" alt=""></a></li>
              <li><a href=""><img src="img/15.jpg" alt=""></a></li>
              <li><a href=""><img src="img/16.jpg" alt=""></a></li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
  </div> 
  <script src="js/vue.js"></script>
 <script>
    new Vue({
    el:'#app',
    data:{
      price:0,
      a:"秦瑞华的蛋糕",
      weight:'1',
      items:[],
      c:0,
      img:"img/芒果裸蛋糕.jpg",
      d:1,
      record:'',
      record1:'',
      thecount:1
    },
    mounted(){
      
      $.ajax({
          url:'http://127.0.0.1:8080/user/getChart',
          type:"get",
          data:{fid:1},
          dataType:"json",
          success:results=>{
            //console.log(results)
            this.items=results;
            console.log(this.items)
            for(var i=0;i<this.items.length;i++){
               this.c=this.c+parseInt(this.items[i].item_price);
               
            }
            localStorage.setItem('count', this.items.length);
            this.thecount=localStorage.getItem('count')
          }
        })
    },
    methods:{
      add(index){
        
        this.items[index].item_address=parseInt(this.items[index].item_address)+1
        
        this.items[index].item_weight=this.items[index].item_weight+1;
        this.items[index].item_price=parseInt(this.items[index].item_address)*parseInt(this.items[index].item_solor_price);
        this.d=this.d+1
        this.c=this.c+parseInt(this.items[index].item_solor_price)
        this.thecount=parseInt(this.thecount)+1;
        localStorage.setItem('count', this.thecount);
      },
      sub(index){
        if(parseInt(this.items[index].item_address)>1){
          this.items[index].item_address=parseInt(this.items[index].item_address)-1;
          this.items[index].item_price=parseInt(this.items[index].item_address)*parseInt(this.items[index].item_solor_price);
          this.items[index].item_weight=this.items[index].item_weight-1;
          this.c=this.c-parseInt(this.items[index].item_solor_price);
          this.thecount=parseInt(this.thecount)-1;
          localStorage.setItem('count', this.thecount);
        }
      },
      
      remove(index){
        this.c=this.c-parseInt(this.items[index].item_price)
        this.a="秦瑞华";
        this.record=this.items[index].item_name;
        this.record1=this.items[index].nid;
        console.log(this.items[index].item_address);
        this.thecount=parseInt(this.thecount)-this.items[index].item_address;
        localStorage.setItem('count', this.thecount);
        this.items.splice(index,1)
        
        
        $.ajax({
          url:'http://127.0.0.1:8080/user/delete',
          type:"get",
          data:{fid:this.record,fid1:this.record1},
          dataType:"json",
          success:results=>{
             
          }
        })
          
      },
      del(){
        this.items=[];
        this.thecount=0;
        sessionStorage.setItem('count', this.thecount);
        this.c=0;
        $.ajax({
          url:'http://127.0.0.1:8080/user/deleteall',
          type:"get",
          data:{fid:1},
          dataType:"json",
          success:results=>{
             
          }
        })
      }
    }
    
  })
 </script>

 
</body>

</html>